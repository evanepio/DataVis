<!DOCTYPE html>
<html>

<head>
    <title>Open Data - Historic sites visits on PEI 2004 to 2015</title>

    <!-- vis.js stylesheet and code -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.min.css"/>
</head>

<body>
<header>
    <h1>Historic sites visits on PEI 2004 to 2015</h1>
    <p>A visualization of PEI Historic sites visits on PEI 2004 to 2015</p>
</header>
<article>
    <div id="status"></div>
    <div id="chart"></div>
    <div id="controls"></div>
</article>

<footer>
    <div>
        A visualization of <a href="https://www.princeedwardisland.ca/en/service/historic-site-visits-open-data"> this
        data set</a>,
        licensed under the <a
            href="https://www.princeedwardisland.ca/en/information/finance/open-government-licence-prince-edward-island">
        Open Government License - Prince Edward Island</a>
    </div>
    <div>Using the <a href="http://visjs.org">vis.js</a> JavaScript library to render the graphs</div>
</footer>
<script type="text/javascript" src="scripts/historicSiteVisitors.js"></script>
<script>
    // Put a new status message in the status div
    var updateStatus = function (status) {
        var statusDiv = document.getElementById('status');
        statusDiv.innerHTML = status;
    };

    HISTORIC_DATA.loadData(function () {
        // Success! Load the chart!
        updateStatus("Data loaded.");
        var container = document.getElementById('chart');
        var locations = HISTORIC_DATA.getUniquePlaces();
        var items = HISTORIC_DATA.getAllData();

        var groups = new vis.DataSet();
        locations.forEach(function (location, index) {
            groups.add({
                id: index,
                content: location,
            });
        });

        var dataset = new vis.DataSet(items);

        var options = {
            drawPoints: true,
            dataAxis: {visible: false},
            legend: true
        };

        var graph2d = new vis.Graph2d(container, dataset, groups, options);
    }, function () {
        // Failure. WTF.
        updateStatus("Data failed to load. Check the console?");
    });
</script>
</body>
</html>